---
### infrahub_inventory.yml file in YAML format
### infrahub.infrahub.inventory plugin is able to do a lookup for ENV vars: INFRAHUB_TOKEN and INFRAHUB_API

plugin: infrahub.infrahub.inventory
api_endpoint: "http://localhost:8000"
validate_certs: True
timeout: 30

strict: True

branch: "jfk1-update-edge-ips"

nodes:
  InfraDevice:
    filters:
      site__ids: "17910a95-d53b-7d4c-3371-d8eb2ff0efbf" #jfk1
      role__ids: "17910a95-6e4d-e316-3373-d8e037fc39db" #edge
    include:
      - name
      - primary_address
      - platform
      - site

compose:
  hostname: name
  platform: platform.ansible_network_os
  ansible_host: primary_address.address

keyed_groups:
  - prefix: site
    key: site.name
